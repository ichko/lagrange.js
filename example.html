<html>
    <head>
        <meta charset="utf-8">
        <title>Example</title>

        <style>*{padding: 0;margin: 0}</style>
    </head>
    <body>
        <canvas id="canvas"></canvas>

        <script src="lagrange.js"></script>
        <script src="plotter.js"></script>
        <script src="io.js"></script>
        
        <script>

            let [ canvas, ctx, width, height ] = ((canvasId) => {
                let canvas = document.getElementById(canvasId);
                [ canvas.width, canvas.height ] = [ innerWidth, innerHeight ];

                let ctx = canvas.getContext('2d');
                ctx.translate(canvas.width / 2, canvas.height / 2);

                return [ canvas, ctx, canvas.width, canvas.height ];
            })('canvas');

                
            let points = [
                    {x: 0, y: 1},
                    {x: 1, y: 2},
                    {x: -10, y: -30},
                    {x: 10, y: -30},
                ],
                polynomial = new Lagrange(points).polynomial,
                plotter = new Plotter(ctx),
                handler = new IO();

            handler.mouse.scroll = (direction) => {
                plotter.config.scale *= 1.2 ** direction;
                draw();
            };

            handler.mouse.click = (point) => {
                points.push(point);
                polynomial = new Lagrange(points).polynomial;
            };

            function draw() {
                plotter
                    .clear(width, height)
                    .addFunctions([polynomial, Math.sin])
                    .show();
            }
            draw();

        </script>
    </body>
</html>